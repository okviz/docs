class Search{minSearchLength=3;lastQuery={query:"",html:""};search(e,t=3,r=130){if((e=e.replace(/[<>&'"]/g,"")).length>=this.minSearchLength){if(e!=this.lastQuery.query){let n="<ul>";const a=new Fuse(searchIndex,{includeMatches:!0,minMatchCharLength:e.length,findAllMatches:!0,threshold:0,ignoreLocation:!0,keys:["title","content"]}).search(e);if(a.length){for(let e=0;e<Math.min(a.length,t);e++){const t=a[e],l=this.highlight(t,r);n+=`\n                            <li>\n                                <a href="${t.item.url}">\n                                    <div class="item-title">${t.item.title}</div>\n                                    <div class="item-snippet">${l}</div>\n                                </a>\n                            </li>\n                        `}a.length>t&&(n+=`\n                            <li class="show-all"><a href="/search/?s=${e}">Showing ${t} of ${a.length} results. See all results...</a></li>\n                        `)}else n+='<li class="no-results">No results. Try another keyword.</li>';n+="</ul>";const l={query:e,html:n};return this.lastQuery=l,l}return this.lastQuery}return null}highlight(e,t){let r="";for(let n=0;n<e.matches.length;n++){let a=e.matches[n];if("content"==a.key){let n=e.item[a.key],l=[].concat(a.indices),s=l.shift(),h=s[0];if(h<=t)h=0;else for(let e=h-Math.ceil(t/3);e<h;e++){if(" "==n.charAt(e)){r+="&hellip;",h=e;break}}for(let e=h;e<n.length;e++){let a=n.charAt(e);if(s&&e==s[0]&&(r+="<b>"),r+=a,s&&e==s[1]&&(r+="</b>",s=l.shift()),r.length>=t&&("."==a||" "==a||";"==a)){" "==a&&(r+="&hellip;");break}}break}}return r}}const searcher=new Search,isSearchPage="/search"==window.location.pathname.slice(-7)||"/search/"==window.location.pathname.slice(-8),headerSearchElement=document.querySelector("header.main .search input");function headerSearch(e){const t=(e,r=!1)=>{let n=document.querySelector(".search-results"),a=document.querySelector(".search-catcher");!1!==r&&(n.innerHTML=r),e?(n.removeAttribute("hidden"),a||(a=document.createElement("div"),a.classList.add("search-catcher"),document.body.append(a),a.addEventListener("click",(e=>{e.preventDefault(),t(!1)})))):(n.setAttribute("hidden","hidden"),a&&a.remove())};if(e){const r=searcher.search(e);null!==r?t(!0,r.html):t(!1)}else t(!1)}function getQueryVariable(e){const t=window.location.search.substring(1).split("&");for(var r=0;r<t.length;r++){const n=t[r].split("=");if(n[0]===e)return decodeURIComponent(n[1].replace(/\+/g,"%20")).trim()}return""}headerSearchElement&&(headerSearchElement.addEventListener("search",(e=>{headerSearch(e.currentTarget.value)})),headerSearchElement.addEventListener("keyup",(e=>{const t=e.currentTarget.value;"Enter"==e.key?window.location.href=`/search/?s=${t}`:headerSearch(t)})),headerSearchElement.addEventListener("click",(e=>{e.stopPropagation(),headerSearch(e.currentTarget.value)})));const query=getQueryVariable("s");if(query&&headerSearchElement&&(headerSearchElement.value=query),isSearchPage){const e=document.querySelector(".page-search-results");if(e)if(query){const t=searcher.search(query,1/0,300);e.innerHTML=t?t.html:'<ul><li class="no-results">No results. Try another keyword.</li></ul>'}else e.innerHTML='<ul><li class="no-results">Nothing to search.</li></ul>'}else query&&(window.location.href=`/search/${window.location.search}`);