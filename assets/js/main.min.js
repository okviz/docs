/*!
 * OKVIZ Documentation
 * Copyright (c) OKVIZ corp. - All rights reserved.
 * https://docs.okviz.com
*/
function toggleResults(e,t=!1){let l=document.querySelector(".search-results"),r=document.querySelector(".search-catcher");!1!==t&&(l.innerHTML=t),e?(l.classList.remove("hidden"),r||(r=document.createElement("div"),r.classList.add("search-catcher"),document.body.append(r),r.addEventListener("click",e=>{e.preventDefault(),toggleResults(!1)}))):(l.classList.add("hidden"),r&&r.remove())}function search(e){if(e.length>=minSearchLen)if(e!=lastTerm){let t=new Fuse(searchIndex,{includeMatches:!0,minMatchCharLength:e.length,threshold:0,ignoreLocation:!0,keys:["title","content"]}),l="<ul>",r=t.search(e);r.length?r.forEach(e=>{let t=highlight(e);l+=`\n                        <li>\n                            <a href="${e.item.url}" class="unseen"><div class="title">${e.item.title}</div>${t}</a>\n                            \n                        </li>\n                    `}):l+='<li class="no-results">No results. Try another keyword.</li>',l+="</ul>",toggleResults(!0,l),lastTerm=e}else toggleResults(!0);else toggleResults(!1)}function highlight(e){let t="";for(let l=0;l<e.matches.length;l++){let r=e.matches[l];if("content"==r.key){let l=e.item[r.key],n=[].concat(r.indices),s=n.shift(),o=s[0];if(o<=maxPreviewLen)o=0;else for(let e=o-Math.ceil(maxPreviewLen/3);e<o;e++){let r=l.charAt(e);if(" "==r){t+="&hellip;",o=e;break}}for(let e=o;e<l.length;e++){let r=l.charAt(e);if(s&&e==s[0]&&(t+="<b>"),t+=r,s&&e==s[1]&&(t+="</b>",s=n.shift()),t.length>=maxPreviewLen&&("."==r||" "==r||";"==r)){" "==r&&(t+="&hellip;");break}}break}}return t}let treeToggleEls=document.querySelectorAll(".tree-toggle");treeToggleEls.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();let t=e.currentTarget.parentNode;t.classList.contains("expanded")?t.classList.remove("expanded"):t.classList.add("expanded")})});let treeLinks=document.querySelectorAll(".tree-link");for(let e=0;e<treeLinks.length;e++)if(treeLinks[e].href==document.location.href){treeLinks[e].scrollIntoView(!1);break}let showToDo="?todo"==window.location.search;showToDo?window.history.replaceState({},null,document.location.href.replace(window.location.search,"")):showToDo=localStorage.getItem("todo"),showToDo?(document.body.classList.add("show-todo"),localStorage.setItem("todo",!0)):document.body.classList.remove("show-todo");let minSearchLen=3,maxPreviewLen=140,lastTerm="",searchEl=document.querySelector(".search input");searchEl.addEventListener("change",e=>{search(e.currentTarget.value)}),searchEl.addEventListener("keyup",e=>{search(e.currentTarget.value)}),searchEl.addEventListener("click",e=>{search(e.currentTarget.value)});